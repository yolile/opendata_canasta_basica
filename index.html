<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>ECharts</title>
</head>
<body>
	<!--Step:1 Prepare a dom for ECharts which (must) has size (width & hight)-->
	<!--Step:1 为ECharts准备一个具备大小（宽高）的Dom-->

	<div id="mainMap"
		style="height: 500px; border: 1px solid #ccc; padding: 10px;"></div>

	<!--Step:2 Import echarts-all.js-->
	<!--Step:2 引入echarts-all.js-->
	<script src="resources/js/echarts/build/dist/echarts-all.js"></script>

	<script type="text/javascript">
		// Step:3 echarts & zrender as a Global Interface by the echarts-plain.js.
		// Step:3 echarts和zrender被echarts-plain.js写入为全局接口
		var dataMap = {};
		function dataFormatter(obj) {
			var pList = [ 'enero', 'febrero', 'marzo', 'abril', 'mayo',
					'junio', 'julio', 'agosto', 'setiembre', 'octubre',
					'noviembre', 'diciembre' ];
			var temp;
			var max = 0;
			for (var year = 2008; year <= 2010; year++) {
				temp = obj[year];
				for (var i = 0, l = temp.length; i < l; i++) {
					max = Math.max(max, temp[i]);
					obj[year][i] = {
						name : pList[i],
						value : temp[i]
					}
				}
				obj[year + 'max'] = Math.floor(max / 100) * 100;
			}
			return obj;
		}

		function dataMix(list) {
			var mixData = {};
			for (var i = 0, l = list.length; i < l; i++) {
				for ( var key in list[i]) {
					if (list[i][key] instanceof Array) {
						mixData[key] = mixData[key] || [];
						for (var j = 0, k = list[i][key].length; j < k; j++) {
							mixData[key][j] = mixData[key][j] || {
								name : list[i][key][j].name,
								value : []
							};
							mixData[key][j].value.push(list[i][key][j].value);
						}
					}
				}
			}
			return mixData;
		}

		dataMap.dataDolar = dataFormatter({
			//max : 60000,

			2010 : [4800,4727,4716,4745,4763,4773,4768,4785,4871,4952,4709,4621],
			2009 : [ 5032.64,5127.03,5149.60,5054.53,5046.81,5036.34,5033.84,4960.80,4939.43,4885.63,4835.03,4681.48],
			2008 : [ 4746.74,4724.49,4544.539,4304.204,4125.156,4000.78,3999.84,4002.88,4016.22,4481.25,4875.5,4916.43]
		});

		dataMap.dataPrecio = dataFormatter({

			2010 : [2963,2826,2896,2870,2834,2808,2847,2902,2881,3568,3751,3190],
			2009 : [ 3260,3073,3045,3079,2981,2824,2755,3051,3009,2980,2987,2827],
			2008 : [ 3161,3273,3293,3475,3526,3570,3619,3509,3471,3356,3125,3149]

		});

		dataMap.dataGDP_Estate = dataMix([ dataMap.dataDolar, dataMap.dataPrecio ]);

		var myChart2 = echarts.init(document.getElementById('mainMap'));
		option = {

			timeline : {
				data : [ '2008-01-01', '2009-01-01','2010-01-01'],
				label : {
					formatter : function(s) {
						return s.slice(0, 4);
					}
				},
				autoPlay : true,
				playInterval : 1000
			},
			options : [ {
				title : {
					'text' : '2008（Precio vs ICD）',
					'subtext' : 'Pan Felipe'
				},
				tooltip : {
					trigger : 'axis',
					showDelay : 0,
					axisPointer : {
						show : true,
						type : 'cross',
						lineStyle : {
							type : 'dashed',
							width : 1
						}
					}
				},
				toolbox : {
					'show' : true,
					orient : 'vertical',
					x : 'right',
					y : 'center',
					'feature' : {
						'mark' : {
							'show' : true
						},
						'dataView' : {
							'show' : true,
							'readOnly' : false
						},
						'restore' : {
							'show' : true
						},
						'saveAsImage' : {
							'show' : true
						}
					}
				},
				grid : {
					'y' : 80,
					'y2' : 100
				},
				xAxis : [ {
					'type' : 'value',
					'name' : 'Dolar',
					'max' : 5500,
					'min' : 3500

				} ],
				yAxis : [ {
					'type' : 'value',
					'name' : 'Precio',
					'max' : 5000,
					'min' : 2600
				} ],
				series : [ {
					'name' : 'Precio',
					'type' : 'scatter',
					markLine : {
						data : [ {
							type : 'average',
							name : 'y平均值',
							itemStyle : {
								normal : {
									borderColor : 'red'
								}
							}
						}, {
							type : 'average',
							name : 'x平均值',
							valueIndex : 0,
							itemStyle : {
								normal : {
									borderColor : 'red'
								}
							}
						} ]
					},
					symbolSize : 5,
					itemStyle : {
						normal : {
							label : {
								show : true,
								formatter : '{b}'
							}
						}
					},
					'data' : dataMap.dataGDP_Estate['2008']

				}]}, {
					title : {
						'text' : '2009'
					},
					series : [ {
						'data' : dataMap.dataGDP_Estate['2009']
					} ]
				}, {
					title : {
						'text' : '2010'
					},
					series : [ {
						'data' : dataMap.dataGDP_Estate['2010']
					} ]
				} ]
			};
		myChart2.setOption(option);
	</script>
</body>
</html>
